# PowerDNS Operator

[//]: # (README.md generated by gotmpl. DO NOT EDIT.)

![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![Version: 0.5.1](https://img.shields.io/badge/Version-0.5.1-informational?style=flat-square)

Manage PowerDNS resources with Kubernetes

## TL;DR
```bash
helm repo add powerdns-operator https://powerdns-operator.github.io/PowerDNS-Operator-helm-chart
helm install powerdns-operator powerdns-operator/powerdns-operator
```

## Installing the Chart
To install the chart with the release name `powerdns-operator`:
```bash
helm install powerdns-operator powerdns-operator/powerdns-operator
```

## Uninstalling the Chart
To uninstall the `powerdns-operator` deployment:
```bash
helm uninstall powerdns-operator
```
The command removes all the Kubernetes components associated with the chart and deletes the release.

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| affinity | object | `{}` |  |
| annotations | object | `{}` | Annotations to add to the controller deployment. |
| api.timeoutSeconds | int | `10` | Specifies timeout to connect to PowerDNS (in seconds) |
| api.tls | object | `{"caCert":"","configMapKey":"ca.crt","existingConfigMap":"","insecure":false}` | Custom CA certificate for validating HTTPS connections to the PowerDNS API (optional) |
| api.tls.caCert | string | `""` | CA certificate content (only used if existingConfigMap is empty) |
| api.tls.configMapKey | string | `"ca.crt"` | ConfigMap key containing the CA certificate (default: ca.crt) |
| api.tls.existingConfigMap | string | `""` | Name of existing ConfigMap containing the CA certificate |
| api.tls.insecure | bool | `false` | Skip PowerDNS API TLS certificate verification |
| api.url | string | `"https://powerdns.example.local:8081"` | Specifies the PowerDNS API URL |
| api.vhost | string | `"localhost"` | Specifies the PowerDNS VHOST |
| commonLabels | object | `{}` |  |
| credentials.data.PDNS_API_KEY | string | `"secret"` | Specifies the PowerDNS API key used to authenticate |
| credentials.existingSecret | string | `""` | Specifies whether to use an existing secret. |
| credentials.name | string | `"powerdns-api-credentials"` | Specifies the secret name to create if `existingSecret` is empty. |
| dnsConfig | object | `{}` | Specifies `dnsOptions` to deployment |
| dnsPolicy | string | `"ClusterFirst"` | Specifies `dnsPolicy` to deployment |
| fullnameOverride | string | `""` |  |
| global.affinity | object | `{}` |  |
| global.compatibility.openshift.adaptSecurityContext | string | `"auto"` | Manages the securityContext properties to make them compatible with OpenShift. Possible values: auto - Apply configurations if it is detected that OpenShift is the target platform. force - Always apply configurations. disabled - No modification applied. |
| global.nodeSelector | object | `{}` |  |
| global.tolerations | list | `[]` |  |
| global.topologySpreadConstraints | list | `[]` |  |
| hostNetwork | bool | `false` | Run the controller on the host network |
| image.pullPolicy | string | `"IfNotPresent"` |  |
| image.repository | string | `"ghcr.io/powerdns-operator/powerdns-operator"` |  |
| image.tag | string | `""` |  |
| imagePullSecrets | list | `[]` | Optional array of imagePullSecrets containing private registry credentials # Ref: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/ |
| labels | object | `{}` | Extra Labels to add to the controller deployment. |
| livenessProbe.httpGet.path | string | `"/healthz"` |  |
| livenessProbe.httpGet.port | int | `8081` |  |
| livenessProbe.initialDelaySeconds | int | `15` |  |
| livenessProbe.periodSeconds | int | `20` |  |
| metrics.service.annotations | object | `{}` |  |
| metrics.service.enabled | bool | `true` |  |
| metrics.service.ipFamilies | list | `[]` | Sets the families that should be supported and the order in which they should be applied to ClusterIP as well. Can be IPv4 and/or IPv6. |
| metrics.service.ipFamilyPolicy | string | `""` | Set the ip family policy to configure dual-stack see [Configure dual-stack](https://kubernetes.io/docs/concepts/services-networking/dual-stack/#services) |
| metrics.service.port | int | `8080` |  |
| metrics.serviceMonitor.additionalLabels | object | `{}` |  |
| metrics.serviceMonitor.annotations | object | `{}` |  |
| metrics.serviceMonitor.enabled | bool | `false` |  |
| metrics.serviceMonitor.labels | object | `{}` |  |
| metrics.serviceMonitor.metricRelabelings | list | `[]` |  |
| metrics.serviceMonitor.namespace | string | `""` |  |
| metrics.serviceMonitor.relabelings | list | `[]` |  |
| metrics.serviceMonitor.scheme | string | `"http"` |  |
| metrics.serviceMonitor.scrapeInterval | string | `"15s"` |  |
| metrics.serviceMonitor.scrapeTimeout | string | `"10s"` |  |
| metrics.serviceMonitor.tlsConfig | object | `{}` |  |
| nameOverride | string | `""` |  |
| namespaceOverride | string | `""` |  |
| nodeSelector | object | `{}` |  |
| podAnnotations | object | `{}` | Extra annotations to add to the pod. |
| podLabels | object | `{}` | Extra labels to add to the pod. |
| podSecurityContext.enabled | bool | `true` |  |
| podSecurityContext.runAsNonRoot | bool | `true` |  |
| priorityClassName | string | `""` | Pod priority class name. |
| rbac.create | bool | `true` |  |
| readinessProbe.httpGet.path | string | `"/readyz"` |  |
| readinessProbe.httpGet.port | int | `8081` |  |
| readinessProbe.initialDelaySeconds | int | `5` |  |
| readinessProbe.periodSeconds | int | `10` |  |
| replicaCount | int | `1` | We do not support more than 1 replica |
| resources.limits.cpu | string | `"500m"` |  |
| resources.limits.memory | string | `"128Mi"` |  |
| resources.requests.cpu | string | `"10m"` |  |
| resources.requests.memory | string | `"64Mi"` |  |
| securityContext.allowPrivilegeEscalation | bool | `false` |  |
| securityContext.capabilities.drop[0] | string | `"ALL"` |  |
| securityContext.enabled | bool | `true` |  |
| securityContext.readOnlyRootFilesystem | bool | `true` |  |
| securityContext.runAsNonRoot | bool | `true` |  |
| securityContext.runAsUser | int | `1000` |  |
| securityContext.seccompProfile.type | string | `"RuntimeDefault"` |  |
| serviceAccount.annotations | object | `{}` | Annotations to add to the service account. |
| serviceAccount.create | bool | `true` | Specifies whether a service account should be created. |
| serviceAccount.extraLabels | object | `{}` | Extra Labels to add to the service account. |
| serviceAccount.name | string | `""` | The name of the service account to use. If not set and create is true, a name is generated using the fullname template. |
| terminationGracePeriodSeconds | int | `10` |  |
| tolerations | list | `[]` |  |
| topologySpreadConstraints | list | `[]` |  |